<div style="position: absolute; left: 0; right: 0; top:0; overflow-y: auto; padding: 0.5em" [style.bottom]="showGame ? '50%' : 0">
<h1 style="margin-top: 0">
  Kitten Accountant
</h1>

<a href="" style="float:right" (click)="forget()">Reset</a>

<table class="panel">
  <thead>
    <tr><th style="text-align: center" colspan="2">Jobs</th></tr>
  </thead>
  <tbody>
    <tr *ngFor="let j of jobNames" (click)="addWorker(j, 1)" (contextmenu)="addWorker(j, -1)">
      <td>{{workers[j]}}</td>
      <td style="text-align: left">{{j}}</td>
    </tr>
  </tbody>
</table>

<table class="panel">
  <thead>
    <tr>
      <th colspan="4" style="text-align: center">Production</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of resourceNames" (click)="increaseResource(r, 1)" (contextmenu)="increaseResource(r, -1)">
      <td>{{production[r] | number:'1.2-2'}}</td>
      <td style="text-align:left">{{r}}</td>
      <td>@</td>
      <td>
        {{price[r] | number:'1.2-2'}}
      </td>
      <td style="width: 1em; text-align: center; position: relative">
        <cost-benefit-analysis *ngIf="conversions[r]" [cba]="conversions[r]" class="tooltip"></cost-benefit-analysis>
        <div *ngIf="r == 'fur' || r == 'ivory' || r =='unicorn'" (click)="toggleLuxury(r, $event)" (contextmenu)="toggleLuxury(r, $event)">
          <cost-benefit-analysis *ngIf="r == 'fur'" [cba]="furReport" class="tooltip"></cost-benefit-analysis>
          {{luxury[r] ? 'A' : ''}}
        </div>
      </td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td><input [(ngModel)]="karma" style="width: 2em"></td><td style="text-align: left">karma</td>
    </tr>
  </tfoot>
</table>

<table class="panel table">
  <thead>
    <tr>
      <th>
        RoI
      </th>
      <th>
        building
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let a of actions" (click)="apply(a)" (contextmenu)="undo(a)">
      <td>{{a.roi | number:'1.0-0'}}</td>
      <td>
        {{a.name}}
      </td>
      <td style="position: relative">
        {{a.stateInfo()}}
        <cost-benefit-analysis [cba]="a" class="tooltip"></cost-benefit-analysis>
      </td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="3" style="text-align: center; border-top: 0.5em solid transparent">
        <label>
          <input type="checkbox" [(ngModel)]="showResearchedUpgrades">
          show researched
        </label>
      </td>
    </tr>
  </tfoot>
</table>

<table class="panel table">
  <thead>
    <tr>
      <th colspan="2" style="text-align: center">
        Storage
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let a of storageActions" (click)="apply(a)" (contextmenu)="undo(a)">
      <td>{{a.name}}</td>
      <td style="position: relative">
        {{a.stateInfo()}}
        <cost-benefit-analysis [cba]="a" class="tooltip"></cost-benefit-analysis>
      </td>
    </tr>  
</table>

<div style="clear: both; height: 5em"></div>
</div>

<div style="position: absolute; left:2em; right:2em; background: white; padding: 0.5em; text-align: center" [style.bottom]="showGame ? '50%' : 0">
  <a (click)="showGame = !showGame" style="text-decoration: underline; color:blueviolet; cursor: pointer">{{showGame ? 'Hide' : 'Show'}} Game</a>
</div>
<iframe *ngIf="showGame" src="http://bloodrizer.ru/games/kittens/#" style="position: absolute; left: 0; width: 100%; bottom: 0; border: none" [style.height]="showGame ? '50%' : 0">
</iframe> 